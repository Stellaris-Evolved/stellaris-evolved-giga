namespace = giga_frameworld_origin

### game start
country_event = {
	id = giga_frameworld_origin.000
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		has_origin = origin_frameworld
	}
	
	immediate = {
		# colony ship cost modifier
		add_modifier = {
			modifier = frameworld_origin_colony_cost
		}
		
		set_variable = {
			which = giga_frameworld_megastructure_cost
			value = 1
		}

		##### set up documentation

		begin_event_chain = {
			event_chain = giga_frameworld_docs_chain
		}

		create_point_of_interest = {
			id = giga_frameworld_docs_chain.1
			name = "giga_frameworld_docs_expansion"
			desc = "giga_frameworld_docs_expansion_desc"
			event_chain = "giga_frameworld_docs_chain"
			location = capital_scope
		}

		create_point_of_interest = {
			id = giga_frameworld_docs_chain.2
			name = "giga_frameworld_docs_asteroids"
			desc = "giga_frameworld_docs_asteroids_desc"
			event_chain = "giga_frameworld_docs_chain"
			location = capital_scope
		}

		create_point_of_interest = {
			id = giga_frameworld_docs_chain.3
			name = "giga_frameworld_docs_outposts"
			desc = "giga_frameworld_docs_outposts_desc"
			event_chain = "giga_frameworld_docs_chain"
			location = capital_scope
		}

		create_point_of_interest = {
			id = giga_frameworld_docs_chain.4
			name = "giga_frameworld_docs_districts"
			desc = "giga_frameworld_docs_districts_desc"
			event_chain = "giga_frameworld_docs_chain"
			location = capital_scope
		}

		create_point_of_interest = {
			id = giga_frameworld_docs_chain.5
			name = "giga_frameworld_docs_conquest"
			desc = "giga_frameworld_docs_conquest_desc"
			event_chain = "giga_frameworld_docs_chain"
			location = capital_scope
		}

		create_point_of_interest = {
			id = giga_frameworld_docs_chain.6
			name = "giga_frameworld_docs_stations"
			desc = "giga_frameworld_docs_stations_desc"
			event_chain = "giga_frameworld_docs_chain"
			location = capital_scope
		}

		create_point_of_interest = {
			id = giga_frameworld_docs_chain.7
			name = "giga_frameworld_docs_disabled"
			desc = "giga_frameworld_docs_disabled_desc"
			event_chain = "giga_frameworld_docs_chain"
			location = capital_scope
		}

		create_point_of_interest = {
			id = giga_frameworld_docs_chain.8
			name = "giga_frameworld_docs_bonuses"
			desc = "giga_frameworld_docs_bonuses_desc"
			event_chain = "giga_frameworld_docs_chain"
			location = capital_scope
		}

		##### END DOCS

		# set up AI variables
		set_variable = {
			which = frameworld_ai_outpost_candidate_count
			value = 0
		}

		# associate this country with a specific frame
		set_country_flag = giga_frameworld@capital_scope

		capital_scope = {
			# associate the frameworld with the country too
			set_planet_flag = giga_frameworld@root

			# fix the entity
			giga_frameworld_update_entity_with_fallback = {
				WHO = root
			}
			
			# spawn defensive stations
			giga_frameworld_spawn_starting_defensive_stations = { WHO = root }
			
			# clear normal planet stuff we can't use
			clear_deposits = yes
			#remove_all_districts = yes # this wrecks our lab due to not enough building slots
			
			# strip extra resources from the black hole, we want to make sure it's clean
			solar_system.star = {
				clear_deposits = yes
			}
			
			# make sure the variables are set up for expansion decisions
			giga_frameworld_init_variables = yes

			# set other AI variables
			set_variable = {
				which = frameworld_ai_artisan_modifier
				value = 0
			}
			
			##### set up deposits
			
			add_deposit = d_frameworld_core
			
			# max mining districts
			add_deposit = d_frameworld_remnants

			# job upkeep adjustment
			add_deposit = d_giga_job_upkeep
			
			##### replace districts
			remove_all_districts = yes
			while = {
				count = value:tec_start_city_district_count
				add_district_and_planet_size_if_needed_effect = {
					district = district_giga_frameworld_city
				}
			}
	
			# 4 - 6 jobs - EVOLVED NOTE - farming and swaps
			while = {
				count = value:tec_start_farming_district_count
				add_district_and_planet_size_if_needed_effect = {
					district = district_giga_frameworld_farming
				}
			}
	
			# 4 jobs - EVOLVED NOTE - mining and swaps 
			while = {
				count = value:tec_start_mining_district_count
				add_district_and_planet_size_if_needed_effect = {
					district = district_giga_frameworld_mining
				}
			}
	
			# 2 jobs - EVOLVED NOTE - generator and swaps 
			while = {
				count = value:tec_start_generator_district_count
				add_district_and_planet_size_if_needed_effect = {
					district = district_giga_frameworld_generator
				}
			}
	
			# 4 jobs - EVOLVED NOTE - industrial and swaps 
			while = {
				count = value:tec_start_industrial_district_count
				add_district_and_planet_size_if_needed_effect = {
					district = district_giga_frameworld_industrial
				}
			}
			
			#####
			
			# get rid of any bad districts or buildings which can't be supported
			validate_and_repair_planet_buildings_and_districts = yes

			# set the maintenance mod on
			giga_frameworld_apply_expanded_maintenance_modifier = yes
		}
	}
}